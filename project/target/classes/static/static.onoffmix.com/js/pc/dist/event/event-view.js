function encore_finish(){document.location.reload()}!function(t,u){"use strict";function a(t){var e=u(t).attr("rel").split("|"),n=u("[name='child_reply_content_"+e[1]+"']").val()?u("[name='child_reply_content_"+e[1]+"']").val():null,a=e[0],o=e[1];if(null==n)return alert("내용이 입력되지 않았거나 너무 짧습니다."),!1;u.ajax({crossDomain:!0,type:"POST",async:!0,cache:!1,url:"/event/detail/child_reply_write",data:{Evt_No:a,Evt_Cmmt_No:o,Reply_Content:n},dataType:"json",success:function(t){if("0000"!=t.API_CODE)return"1000"==t.API_CODE?confirm(t.API_MSG)&&(location.href=t.API_DATA.url):alert(t.API_MSG),!1;u(".child_reply_list1_"+o).prepend(t.content),u("[name='child_reply_content_"+o+"']").val("")}})}u(".no_scroll").noScroll(),u(".main_thumbnail.event_thumbnail").fancybox({type:"image",padding:3,autoScale:!1}),u(".icon_button span").each(function(){var t=u(this);t.qtip({content:{text:t.text()},position:{my:"top center",at:"bottom center",adjust:{y:3}}})}),u(".label_wrap .waiting").each(function(){var t=u(this);t.qtip({content:{text:t.find(".tooltip_txt")},position:{my:"top center",at:"bottom center"}})}),u(".detaili_frame").load(function(){var t=u(this),e=t.contents().find("html"),n=t.contents().find("body");t.height(e.prop("scrollHeight")),n.find("area, a").not("[href^='#']").each(function(t,e){var n=u(e),a=n.attr("target");void 0!==a&&""!=a&&"_self"!=a&&"_parent"!=a&&"_top"!=a||n.attr("target","_blank")}),n.find("img").each(function(){u.each(u(this),function(t,e){"A"!=e.parentElement.nodeName&&u(e).fancybox({type:"image",padding:3,autoScale:!1})})})}),u(".btn_report").on("click",function(){if("0"==u(".btn_report").attr("rel")){var t=document.location.href;if(!confirm("로그인 후에 사용할 수 있는 기능입니다. \n로그인 하시겠습니까?"))return;location.href="/account/login?returnUrl="+t}var e=u(".report_form").clone().css("display","block");u.fancybox({content:e.wrapAll("<div />").parent().html(),width:520,height:300,padding:3,autoDimensions:!1,autoScale:!1,showCloseButton:!1,onComplete:function(){u(".cancel_btn").on("click",function(){u("#fancybox-close").trigger("click")})}})}),u(".reply_list").on("click",function(t){var e,n=u(t.target);return n.hasClass("btn_delete")?(function(t){{if(!confirm("댓글을 지우겠습니까.?"))return;var e=u(t).attr("rel").split("|");u.ajax({crossDomain:!0,type:"POST",async:!0,cache:!1,url:"/event/detail/reply_del",data:{Evt_No:e[0],Evt_Cmmt_No:e[1]},dataType:"json",success:function(t){"1"==t.gubun&&("Main"==e[2]?u("#comment_"+e[1]).parent().remove():"Child"==e[2]&&u("#child_comment_"+e[1]).parent().remove(),0==t.count&&u(".comment_number").addClass("hidden"),u(".total_number").html(t.count),u("[name=reply_content]").val(""))}})}}(t.target),!1):n.hasClass("btn_reply")?(e=t.target,u(e).toggleClass("open").closest("li").find(".reply_form").toggleClass("open"),!1):n.hasClass("child_reply_write")?(a(t.target),!1):n.hasClass("child_btn_delete")?(a(t.target),!1):void 0}),u(".reply_write").on("click",function(){var t=u("#content").data("event-no"),e=u("[name='reply_content']").val()?u("[name='reply_content']").val():null;if(null==e)return alert("내용이 입력되지 않았거나 너무 짧습니다."),!1;u(".First_Re").remove(),u.ajax({crossDomain:!0,type:"POST",async:!0,cache:!1,url:"/event/detail/reply_write",data:{evt_no:t,reply_content:e},dataType:"json",success:function(t){if("0000"!=t.API_CODE)return"1000"==t.API_CODE?confirm(t.API_MSG)&&(location.href=t.API_DATA.url):alert(t.API_MSG),!1;u(".reply_list").prepend(t.content),t.count&&u(".comment_number").removeClass("hidden"),u(".total_number").html(t.count),u("[name=reply_content]").val("")}})}),u(".reply_btn").on("click",function(){var t=u(this).attr("rel").split("|");u(".reply_btn");u(this).remove(),u.ajax({crossDomain:!0,type:"POST",async:!0,cache:!1,url:"/event/detail/reply",data:{evt_no:t[0],reg_no:t[1]},dataType:"json",success:function(t){u(".reply_list").append(t.content)}})}),u("[role='tab']").on("click",function(t){t.preventDefault(),u(this).attr("aria-selected",!0).addClass("active").siblings().attr("aria-selected",!1).removeClass("active");var e="#"+u(this).attr("aria-controls");u(e).addClass("active").siblings().removeClass("active")}),u(".more_event li").on("mouseenter",function(){var t=u(this);t.addClass("active").find("h5.title").dotdotdot({ellipsis:"..."}),t.siblings().removeClass("active")}),u(".summary_wrap .summary_txt").height()<=2*parseInt(u(".summary_wrap .summary_txt").css("line-height"))?u(".summary_wrap").removeClass("more_txt"):u(".summary_wrap").addClass("more_txt"),u(".summary_wrap .btn_more").on("click",function(){var t=u(this);t.toggleClass("open"),t.hasClass("open")?t.text("모임소개 닫기").parent().addClass("open"):t.text("모임소개 더보기").parent().removeClass("open")});var e={href:"#eventMap",width:960,height:496,orig:this,padding:3,autoDimensions:!1};function i(t,e){var n=t.attr("min"),a=t.attr("max");(e<=n||a<=e)&&(t.trigger("outqtip"),t.trigger("maxAlert"))}u(".btn_map").on("click",function(t){t.preventDefault(),u("#mapzone").trigger("layer.ofm",e),u("#fancybox-content").addClass("close")}),"?map"==location.search&&u("#mapzone").on("mapLoaded.ofm",function(){u(this).trigger("layer.ofm",e)}),u("#fancybox-close , .thumbnail").click(function(){u("#fancybox-content").removeAttr("class")}),u(document).on("change spinstop",'input[type="checkbox"], input[type="text"]',function(t){var e=Number.prototype.number_format||function(){return this},n=u(".group_list"),a=n.find("input:checked, input.attended").length,o=0,i=1,r=0,c=u(this).closest("li");c.find("[data-original]").each(function(){i=c.find('input[name^="groupMember["]').val()||1;var t=u(this).data("original")*i;u(this).html(e.call(t))}),n.find(".checkbox:checked, .checkbox:checked:hidden").each(function(){u(this).val();o=u(this).attr("rel"),i=u('input[name="groupMember['+u(this).val()+']"]').val()||1,r+=parseInt(o*i)});var l=u(".max_num").attr("rel"),s=(u('input[name="groupMember['+u(this).val()+'"]').val(),parseInt(u(this).val(),10)),p=parseInt(u(this).attr("rel"),10);u(this).hasClass("people_number")&&u(this).parents("li").find(".class_parti, .class_pay").toggle(p<s),l<=a?(u(".group_wrapping").qtip({content:{text:u(".state_tip").text()},position:{my:"top left",at:"bottom left",adjust:{x:22,y:-1}},style:{tip:{width:6,height:4,offset:13,corner:"top left",mimic:"top center"}},show:{event:"change"},hide:{target:u(document),event:"keydown mousedown DOMMouseScroll mousewheel"}}),n.find("li").each(function(){u(this).find(".checkbox").prop("checked")||u(this).find(".checkbox").prop("disabled",!0)})):n.find("li").each(function(){u(this).hasClass("disabled")||u(this).find(".checkbox").prop("checked")||u(this).find(".checkbox").prop("disabled",!1)}),u(".money").html(r.number_format(0))}),Number.prototype.number_format=function(t){return this.toFixed(t).replace(/(\d)(?=(\d{3})+$)/g,"$1,")},u(document).find('input[name^="groupMember["]').trigger("spinstop"),u(".people_number").each(function(){var n=u(this),a=n.attr("min"),o=n.attr("max");n.qtip({content:{text:function(){var t="",e=n.val();return e<=a?(n.val(a),t="신청 가능한 최소 인원은 "+a+" 명 입니다."):o<=e&&(n.val(o),t="신청 가능한 최대 인원은 "+o+" 명 입니다."),t}},position:{my:"top right",at:"bottom right",adjust:{x:-5,y:-1}},style:{tip:{width:6,height:4,offset:13,corner:"top right",mimic:"top center"}},show:{event:"maxAlert"},hide:{target:u(document),event:"DOMMouseScroll mousewheel outqtip"}}),n.spinner({min:a||1,max:o,disabled:n.prop("disabled"),step:1,spin:function(t,e){n.trigger("outqtip"),i(n,e.value)}}),n.on("keyup",function(){i(n,n.val())})}),u(".encore_btn").on("click",function(){var t=u(this).attr("rel");if(10<=parseInt(t))alert("벌점이 누적되어 사용할 수 없는 기능입니다.");else{var e=u(this),n={EVT_NO:u("#content").data("event-no")};u.ajax({url:"/api/event/encore",dataType:"json",data:n,type:"GET",success:function(t){"0000"==t.API_CODE?u.fancybox({href:"/event/encore/"+u("#content").data("event-no"),width:424,height:554,padding:3,autoDimensions:!1,autoScale:!1,showCloseButton:!1,onComplete:function(){u(".cancel_btn").on("click",function(){u("#fancybox-close").trigger("click")})}}):(alert(t.API_MSG),"1001"==t.API_CODE?e.html("앵콜이 요청되었습니다"):e.html("앵콜 요청 불가"),e.attr("disabled","disabled"))}})}}),u(".btn_pin").on("click",function(t){var e;t.preventDefault();var n=u(this);e=n.hasClass("pin")?(n.removeClass("pin").blur(),"remove"):(n.addClass("pin"),"add");var a=u(".btn_pin").attr("rel").split("|"),o=a[0],i=a[1];if(10<=parseInt(i))alert("벌점이 누적되어 사용할 수 없는 기능입니다.");else{var r=document.location.href;u.ajax({crossDomain:!0,type:"POST",async:!0,cache:!1,url:"/event/detail/pin",data:{evt_no:o,pin_gubun:e},dataType:"json",success:function(t){"00"==t.code?u(".count").html(t.count):confirm("로그인 후에 사용할 수 있는 기능입니다. \n로그인 하시겠습니까?")&&(n.removeClass("pin").blur(),location.href="/account/login?returnUrl="+r)}})}}),u(".tab_menu a").on("click",function(t){var e=u(this),n=e.attr("href"),a=u(".event_detail .tab_content "+n).offset().top,o=u(".event_detail .tab_menu").outerHeight();return e.parent().addClass("active").siblings().removeClass("active"),u(window).scrollTop(a-o-30),!1});var n=0,o=u(".wing_event"),r=u("#eventComment, #eventTip").first();u(window).bind("scroll",function(t){0<u(r).offset().top-(u(window).scrollTop()+u(window).height())?n<=0&&(n=1,o.stop(!0,!1).animate({right:"-540px"},400,function(){u(this).hide()})):0<=n&&(n=-1,o.stop(!0,!1).show().animate({right:"0"},400))}).trigger("scroll"),u(".wing_event").find(".btn_close").on("click",function(){o.stop(!0,!1).animate({right:"-500px"},400,function(){u(this).addClass("close").css("right","0")})}),u(".wing_event").find(".btn_open").on("click",function(){o.stop(!0,!1).removeClass("close").css("right","-500px").animate({right:"0"},400)}),u(".tab_menu").each(function(){var t=u(this).offset().top;u(window).scroll(function(){u(window).scrollTop()>=t?u(".event_detail").addClass("fixed"):u(".event_detail").removeClass("fixed")})}).find(".btn_top").on("click",function(t){t.preventDefault(),u(window).scrollTop(0)})}(0,this.jQuery);